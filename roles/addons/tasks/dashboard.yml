---
# create kubernetes-dashboard
- name: create dashboard deployment file
  become: yes
  copy:
    src: dashboard-deployment.yaml
    dest: "{{ kubernetes_addons_dir }}/dashboard-deployment.yaml"
  tags:
    - addons
    - dashboard

- name: create dashboard service file
  become: yes
  copy:
    src: dashboard-svc.yaml
    dest: "{{ kubernetes_addons_dir }}/dashboard-svc.yaml"
  tags:
    - addons
    - dashboard

- name: Create dashboard deployment
  become: yes
  kube:
    resource: deployment
    name: kubernetes-dashboard
    namespace: kube-system
    filename: "{{ kubernetes_addons_dir }}/dashboard-deployment.yaml"
    state: present
  tags:
    - addons
    - dashboard

- name: Create dashboard service
  become: yes
  kube:
    resource: svc
    name: kubernetes-dashboard
    namespace: kube-system
    filename: "{{ kubernetes_addons_dir }}/dashboard-svc.yaml"
    state: present
  tags:
    - addons
    - dashboard
