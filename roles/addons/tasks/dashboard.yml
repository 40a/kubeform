---
# create kubernetes-dashboard
- name: create dashboard pod file
  become: yes
  copy:
    src: dashboard-rc.yaml
    dest: "{{ kubernetes_manifest_dir }}/dashboard-rc.yaml"
  register: dashboard_rc
  tags:
    - addons
    - dashboard

- name: create dashboard service file
  become: yes
  copy:
    src: dashboard-svc.yaml
    dest: "{{ kubernetes_manifest_dir }}/dashboard-svc.yaml"
  register: dashboard_svc
  tags:
    - addons
    - dashboard

- name: create or update Kubernetes dashboard replication controller
  become: yes
  command: "{{ kubectl_bin }} {{ dashboard_rc.changed | ternary('apply', 'create') }} -f {{ kubernetes_manifest_dir }}/dashboard-rc.yaml"
  tags:
    - addons
    - dashboard

- name: create or update Kubernetes dashboard service
  become: yes
  command: "{{ kubectl_bin }} {{ dashboard_svc.changed | ternary('apply', 'create') }} -f {{ kubernetes_manifest_dir }}/dashboard-svc.yaml"
  tags:
    - addons
    - dashboard
