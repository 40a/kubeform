---
# create kubernetes-dashboard
- name: create dashboard pod file
  become: yes
  copy:
    src: dashboard-rc.yaml
    dest: "{{ kubernetes_manifest_dir }}/dashboard-rc.yaml"
  tags:
    - addons
    - dashboard

- name: create dashboard service file
  become: yes
  copy:
    src: dashboard-svc.yaml
    dest: "{{ kubernetes_manifest_dir }}/dashboard-svc.yaml"
  tags:
    - addons
    - dashboard

- name: Create dashboard replication controller
  become: yes
  kube:
    resource: rc
    name: kubernetes-dashboard-canary
    namespace: kube-system
    filename: "{{ kubernetes_manifest_dir }}/dashboard-rc.yaml"
    state: present
  tags:
    - addons
    - dashboard

- name: Create dashboard service
  become: yes
  kube:
    resource: svc
    name: dashboard-canary
    namespace: kube-system
    filename: "{{ kubernetes_manifest_dir }}/dashboard-svc.yaml"
    state: present
  tags:
    - addons
    - dashboard
